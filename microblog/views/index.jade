extends layout

block content
  div(role="main")
    //- 判断操作状态
    -
    if locals.error&&locals.error!=''
      div.container
        div.mt-4.alert.alert-danger #{locals.error}
    if locals.success&&locals.success!=''
      div.container
        div.mt-4.alert.alert-success #{locals.success}

    //- 判断session是否存在
    -
    if session.user
      div.jumbotron
        div.container
          h4.display-6.mb-3 Hello, #{session.user.name}.
          h1.display-4.mb-4 Welcome to #{title}!
          form(method="post",action="/post")
            div.input-group
              textarea.form-control(name="post",id="postMessg",rows="2",required="")
              button.btn.btn-primary(type="submit") 发言
    else
      div.jumbotron
        div.container
          h1.display-4 Hello, welcome to #{title}!
          p Microblog 是一个基于 Node.js 的微博系统。
          p
            a.btn.btn-primary.btn-large.mr-sm-2(href="/login") 登录
            a.btn.btn-dark.btn-large(href="/register") 立即注册

    div.container
      div.row
        -
        each item, index in data
          div.col-md-4.mb-4
            h3 #{item.user} 说
            h6 #{item.time}
            p #{item.post}
            p
             a.btn.btn-secondary(href='/user/#{item.user}',role="button") 去围观 »
      hr
    //- 显示部分发言
    //-
      div.container
        div.row
          div.col-md-4
            h3 Gnomo 说
            p 东风破早梅 向暖一枝开 冰雪无人见 春从天上来
            p
              a.btn.btn-secondary(href="",role="button") 去围观 »
          div.col-md-4
            h3 Gnomo 说
            p Open Chinese Convert（OpenCC）是一个开源的中文简繁转换项目，致力于制作高质量的基于统计预料的简繁转换词库。还提供函数库(libopencc)、命令行简繁转换工具、人工校对工具、词典生成程序、在线转换服务及图形用户界面。
            p
              a.btn.btn-secondary(href="",role="button") 去围观 »
          div.col-md-4
            h3 Gnomo 说
            p 中州韵输入法引擎 / Rime Input Method Engine 取意历史上通行的中州韵，愿写就一部汇集音韵学智慧的输入法经典之作。项目网站设在 http://code.google.com/p/rimeime/创造应用价值是一方面，更要坚持对好技术的追求，希望能写出灵动而易于扩展的代码，使其成为一款个性十足的开源输入法。
            p
              a.btn.btn-secondary(href="",role="button") 去围观 »
        hr

  
  script(type="text/javascript").
    window.onload = function(){
      console.log('hello jade');
    };
    for (var i = 0; i < 10; ++i) {
      function abc(i){console.log(i)};
      setTimeout(abc(i), 0);
    }
    

